<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook Login</title>

    <!-- Load Facebook SDK for JavaScript -->
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js"></script>
</head>
<body>

    <!-- Facebook Login Button -->
    <button id="fb-login-button" onclick="fbLogin()">Login with Facebook</button>
    <!-- Display logged-in user name -->
    <div id="user-name" style="float: right;"></div>

    <script>
      // Initialize the Facebook SDK
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '564187956294759', // Replace with your Facebook App ID
          cookie     : true,  // Enable cookies to allow the server to access the session
          xfbml      : true,  // Parse social plugins on this page
          version    : 'v16.0' // Use this Graph API version for login
        });

        FB.AppEvents.logPageView();   
      };

      // Facebook Login function
      function fbLogin() {
        FB.login(function(response) {
          if (response.status === 'connected') {
            // The user is logged in and authenticated
            FB.api('/me', { fields: 'first_name' }, function(response) {
              const firstName = response.first_name;

              // Display the user's first name in the navbar or wherever needed
              document.getElementById('user-name').innerHTML = `Welcome, ${firstName}`;

              // Hide the Facebook login button after successful login
              document.getElementById('fb-login-button').style.display = 'none';
            });
          } else {
            console.log('User cancelled login or did not fully authorize.');
          }
        }, {scope: 'public_profile,email'}); // Request permission for public profile and email
      }
    </script>

</body>
</html>
